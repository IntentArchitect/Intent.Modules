<?xml version="1.0" encoding="utf-8"?>
<class id="3e111ea5-474c-4e27-bfa0-6f4701329027" type="Suggestions Settings" typeId="f68b5446-19f2-402d-a940-f62b3a592906">
  <name>Suggestions</name>
  <display>Suggestions</display>
  <isAbstract>false</isAbstract>
  <sort-children>by-type-then-by-name</sort-children>
  <genericTypes />
  <isMapped>false</isMapped>
  <parentFolderId>444f582b-b875-4c72-9671-697b47fa367c</parentFolderId>
  <packageId>5c4628ec-679e-4f3d-afda-137c978deae0</packageId>
  <packageName>Intent.Modelers.UI</packageName>
  <stereotypes />
  <metadata />
  <childElements>
    <childElement id="a6639515-249e-49fb-bd5f-8176435dfa6f" type="Suggestion" typeId="0c21ab10-e87b-4e88-ab44-38ea7adf514a">
      <name>Add to Sider Menu</name>
      <display>Add to Sider Menu: Component</display>
      <isAbstract>false</isAbstract>
      <genericTypes />
      <typeReference id="36630279-8115-4905-9c75-67cb0f4b9d96">
        <typeId>b1c481e1-e91e-4c29-9817-00ab9cad4b6b</typeId>
        <isNavigable>true</isNavigable>
        <isNullable>false</isNullable>
        <isCollection>false</isCollection>
        <isRequired>true</isRequired>
        <typePackageName>Intent.Modelers.UI</typePackageName>
        <typePackageId>5c4628ec-679e-4f3d-afda-137c978deae0</typePackageId>
        <stereotypes />
        <genericTypeParameters />
      </typeReference>
      <isMapped>false</isMapped>
      <parentFolderId>3e111ea5-474c-4e27-bfa0-6f4701329027</parentFolderId>
      <packageId>5c4628ec-679e-4f3d-afda-137c978deae0</packageId>
      <packageName>Intent.Modelers.UI</packageName>
      <stereotypes>
        <stereotype stereotypeDefinitionId="daf7d9b3-9c10-4286-b30e-7edb2e62f10e" name="Settings">
          <addedByDefault>true</addedByDefault>
          <definitionPackageName>Intent.ModuleBuilder</definitionPackageName>
          <definitionPackageId>9972b2a9-b749-4bba-b5c8-824bf694c6ef</definitionPackageId>
          <properties>
            <property name="bd242929-b399-4d13-88c0-d046b7161d41" display="Locations" value="[&quot;Diagram&quot;,&quot;Model&quot;]" isActive="true" />
            <property name="8d51eb08-f4a9-4703-ba70-de87c9417d46" display="Filter Function" value="const associationIds = [&#xD;&#xA;  &quot;2b191288-ecae-4743-b069-cbdd927ef349&quot;,// Navigation Specialization Type&#xD;&#xA;];&#xD;&#xA;const layoutSpecializationTypeId = &quot;776a9393-6b23-4a8c-8937-fd7e833fa0ef&quot;;&#xD;&#xA;&#xD;&#xA;if (lookupTypesOf(layoutSpecializationTypeId).length &gt; 0){&#xD;&#xA;&#xD;&#xA;return element.hasStereotype(&quot;ea4adc09-8978-4ede-ba5f-265debb2b60c&quot;)// Page&#xD;&#xA;  &amp;&amp; !lookupTypesOf(associationIds).some(a =&gt; &#xD;&#xA;    a.typeReference.getType().id == element.id &amp;&amp; &#xD;&#xA;    a.getOtherEnd().typeReference.getType().specializationId == layoutSpecializationTypeId);//Layout&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;//If there are no modeled Layouts dont show suggestion&#xD;&#xA;return false;" isActive="true" />
            <property name="ecb7abbb-0297-486e-bd99-cded3226d2a4" display="Display Function" isActive="true" />
            <property name="bfd10a66-2f93-4ffd-bf35-633ff96e7e6c" display="Script" value="const layoutSpecializationTypeId = &quot;5c8a19cf-410b-4ded-930e-446c3fc9bc26&quot;;&#xD;&#xA;const navigationMenuTypeId = &quot;d7282bf2-1626-4b8b-9446-1d530527db06&quot;;&#xD;&#xA;const siderTypeId = &quot;c505f35f-7148-46a3-a812-d9f53a174490&quot;;&#xD;&#xA;&#xD;&#xA;let menus = lookupTypesOf(navigationMenuTypeId);&#xD;&#xA;let siderMenu = menus.find(x =&gt; x.getParent(siderTypeId));&#xD;&#xA;let layout = siderMenu.getParent().getParent();&#xD;&#xA;&#xD;&#xA;let button = createElement(&quot;Menu Item&quot;, toTitleCase(element.getName()), siderMenu.id);&#xD;&#xA;let navAssociation = createAssociation(&quot;Navigation&quot;, layout.id, button.id);&#xD;&#xA;navAssociation.typeReference.setType(element.id);&#xD;&#xA;&#xD;&#xA;let mapping = layout.getAdvancedMapping(&quot;c33f86ad-423a-4a6f-a80c-a3206eafe5cd&quot;);// View Bindings&#xD;&#xA;let targetPath = [layout.id, siderMenu.getParent().id, siderMenu.id, button.id, &quot;a4073b81-6ddd-44cb-909f-f2c97d965112&quot;];//LinkTo&#xD;&#xA;mapping.addMappedEnd(&quot;Event Mapping&quot;&#xD;&#xA;, [layout.id, navAssociation.id ]&#xD;&#xA;, targetPath);&#xD;&#xA;mapping.addMappingExpression(targetPath, &quot;{&quot; + navAssociation.getName() + &quot;}&quot;);" isActive="true" />
            <property name="1d9dd994-46c3-4fdc-a24b-c69f689ca283" display="Dependencies" isActive="true" />
          </properties>
        </stereotype>
      </stereotypes>
      <metadata />
      <childElements />
    </childElement>
    <childElement id="360aa2c8-c680-4784-8dd1-8d34ff325be9" type="Suggestion" typeId="0c21ab10-e87b-4e88-ab44-38ea7adf514a">
      <name>Call Backend Service</name>
      <display>Call Backend Service: Component</display>
      <isAbstract>false</isAbstract>
      <genericTypes />
      <typeReference id="b32733c0-e33c-4ef6-9199-18ec0ccdc033">
        <typeId>b1c481e1-e91e-4c29-9817-00ab9cad4b6b</typeId>
        <isNavigable>true</isNavigable>
        <isNullable>false</isNullable>
        <isCollection>false</isCollection>
        <isRequired>true</isRequired>
        <typePackageName>Intent.Modelers.UI</typePackageName>
        <typePackageId>5c4628ec-679e-4f3d-afda-137c978deae0</typePackageId>
        <stereotypes />
        <genericTypeParameters />
      </typeReference>
      <isMapped>false</isMapped>
      <parentFolderId>3e111ea5-474c-4e27-bfa0-6f4701329027</parentFolderId>
      <packageId>5c4628ec-679e-4f3d-afda-137c978deae0</packageId>
      <packageName>Intent.Modelers.UI</packageName>
      <stereotypes>
        <stereotype stereotypeDefinitionId="daf7d9b3-9c10-4286-b30e-7edb2e62f10e" name="Settings">
          <addedByDefault>true</addedByDefault>
          <definitionPackageName>Intent.ModuleBuilder</definitionPackageName>
          <definitionPackageId>9972b2a9-b749-4bba-b5c8-824bf694c6ef</definitionPackageId>
          <properties>
            <property name="bd242929-b399-4d13-88c0-d046b7161d41" display="Locations" value="[&quot;Diagram&quot;,&quot;Model&quot;]" isActive="true" />
            <property name="8d51eb08-f4a9-4703-ba70-de87c9417d46" display="Filter Function" isActive="true" />
            <property name="ecb7abbb-0297-486e-bd99-cded3226d2a4" display="Display Function" isActive="true" />
            <property name="bfd10a66-2f93-4ffd-bf35-633ff96e7e6c" display="Script" value="const result = await dialogService.openForm({&#xD;&#xA;    title: &quot;Add to Diagram&quot;,&#xD;&#xA;    fields: [&#xD;&#xA;        {&#xD;&#xA;            id: &quot;selectedElementId&quot;,&#xD;&#xA;            label: &quot;Select Elements&quot;,&#xD;&#xA;            fieldType: &quot;tree-view&quot;,&#xD;&#xA;            treeViewOptions: { &#xD;&#xA;                rootId: getCurrentDiagram().getOwner().getPackage().id,&#xD;&#xA;                isMultiSelect: false,&#xD;&#xA;                submitFormTriggers: [&quot;double-click&quot;, &quot;enter&quot;],&#xD;&#xA;                hasFilter: true,&#xD;&#xA;                selectableTypes: [&#xD;&#xA;                    { specializationId: &quot;Command&quot;, autoExpand: true, isSelectable: (x) =&gt; true },&#xD;&#xA;                    { specializationId: &quot;Query&quot;, autoExpand: true, isSelectable: (x) =&gt; true },&#xD;&#xA;                    { specializationId: &quot;Operation&quot;, autoExpand: true, isSelectable: (x) =&gt; x.getParent().specialization == &quot;Service&quot; },&#xD;&#xA;                ],&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;    ]&#xD;&#xA;})&#xD;&#xA;&#xD;&#xA;if (result.selectedElementId.length == 0) {&#xD;&#xA;    return;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;const component = element;&#xD;&#xA;const diagram = getCurrentDiagram();&#xD;&#xA;const componentVisual = diagram.getVisual(element.id);&#xD;&#xA;const space = diagram.findEmptySpace({ x: componentVisual.getDimensions().right + 250, y: componentVisual.getDimensions().getCenter().y}, { width: 200, height: 100 });&#xD;&#xA;const serviceRequest = lookup(result.selectedElementId);&#xD;&#xA;&#xD;&#xA;if (!serviceRequest) {&#xD;&#xA;    return;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;if (serviceRequest.specialization == &quot;Query&quot;) {&#xD;&#xA;    const query = serviceRequest;&#xD;&#xA;    diagram.layoutVisuals([query.id], space, false);&#xD;&#xA;    const operation = createElement(&quot;Component Operation&quot;, &quot;Load&quot; + removePrefix(removeSuffix(query.getName(), &quot;Query&quot;), &quot;Get&quot;), component.id);&#xD;&#xA;&#xD;&#xA;    query.getChildren(&quot;DTO-Field&quot;).forEach(param =&gt; {&#xD;&#xA;        const parameter = operation.addChild(&quot;Parameter&quot;, toCamelCase(param.getName()));&#xD;&#xA;        parameter.typeReference.setType(param.typeReference.toModel())&#xD;&#xA;    });&#xD;&#xA;&#xD;&#xA;    const property = component.addChild(&quot;Property&quot;, &quot;Model&quot;);&#xD;&#xA;    property.typeReference.setType(query.typeReference.toModel());&#xD;&#xA;    property.typeReference.setIsNullable(true);&#xD;&#xA;&#xD;&#xA;    const callService = createAssociation(&quot;Call Service Operation Action&quot;, operation.id, query.id)&#xD;&#xA;    diagram.layoutVisuals([callService.id]);&#xD;&#xA;&#xD;&#xA;    const mapping = callService.createAdvancedMapping(operation.id, query.id, &quot;e4a4111b-cf13-4efe-8a5d-fea9457ac8ad&quot;);&#xD;&#xA;    mapping.addMappedEnd(&quot;ab447316-1252-49bc-a695-f34cb00a3cdc&quot;, [operation.id, callService.id], [query.id]);&#xD;&#xA;    query.getChildren(&quot;DTO-Field&quot;).forEach((param, $index) =&gt; {&#xD;&#xA;        mapping.addMappedEnd(&quot;ce70308a-e29d-4644-8410-f9e6bbd214fc&quot;, [operation.id, operation.getChildren()[$index].id], [serviceRequest.id, param.id]);&#xD;&#xA;    });&#xD;&#xA;&#xD;&#xA;    const returnMapping = callService.createAdvancedMapping(operation.id, query.id, &quot;e60890c6-7ce7-47be-a0da-dff82b8adc02&quot;);&#xD;&#xA;    returnMapping.addMappedEnd(&quot;9cccf6be-31be-4ac0-a026-ed0c4f5578bf&quot;, [operation.id, callService.id, &quot;2f68b1a4-a523-4987-b3da-f35e6e8e146b&quot;], [property.id]);&#xD;&#xA;&#xD;&#xA;} else if (serviceRequest.specialization == &quot;Command&quot;) {&#xD;&#xA;    &#xD;&#xA;    const command = serviceRequest;&#xD;&#xA;    diagram.layoutVisuals([command.id], space, false);&#xD;&#xA;    const operation = createElement(&quot;Component Operation&quot;, removeSuffix(command.getName(), &quot;Command&quot;), component.id);&#xD;&#xA;&#xD;&#xA;    const callService = createAssociation(&quot;Call Service Operation Action&quot;, operation.id, command.id)&#xD;&#xA;    diagram.layoutVisuals([callService.id]);&#xD;&#xA;&#xD;&#xA;    const mapping = callService.createAdvancedMapping(operation.id, command.id, &quot;e4a4111b-cf13-4efe-8a5d-fea9457ac8ad&quot;);&#xD;&#xA;    mapping.addMappedEnd(&quot;ab447316-1252-49bc-a695-f34cb00a3cdc&quot;, [operation.id, callService.id], [command.id]);&#xD;&#xA;&#xD;&#xA;    addViewModel(command, component, mapping, &quot;Command&quot;, &quot;Create&quot;, &quot;Update&quot;);&#xD;&#xA;&#xD;&#xA;    // if (command.typeReference.isTypeFound())  {&#xD;&#xA;    //     const property = component.addChild(&quot;Property&quot;, &quot;Model&quot;);&#xD;&#xA;    //     property.typeReference.setType(command.typeReference.toModel());&#xD;&#xA;&#xD;&#xA;    //     const returnMapping = callService.createAdvancedMapping(operation.id, command.id, &quot;e60890c6-7ce7-47be-a0da-dff82b8adc02&quot;);&#xD;&#xA;    //     returnMapping.addMappedEnd(&quot;9cccf6be-31be-4ac0-a026-ed0c4f5578bf&quot;, [operation.id, callService.id, &quot;2f68b1a4-a523-4987-b3da-f35e6e8e146b&quot;], [property.id]);&#xD;&#xA;    // }&#xD;&#xA;    mapping.launchDialog();&#xD;&#xA;&#xD;&#xA;} else if (serviceRequest.specialization == &quot;Operation&quot;) {&#xD;&#xA;    const serviceOp = serviceRequest; // Service Operation&#xD;&#xA;    diagram.layoutVisuals([serviceOp.getParent().id], space, false);&#xD;&#xA;    const operation = createElement(&quot;Component Operation&quot;, serviceOp.getName(), component.id);&#xD;&#xA;&#xD;&#xA;    const callService = createAssociation(&quot;Call Service Operation Action&quot;, operation.id, serviceOp.id)&#xD;&#xA;    diagram?.layoutVisuals([callService.id]);&#xD;&#xA;&#xD;&#xA;    const mapping = callService.createAdvancedMapping(operation.id, serviceOp.id, &quot;e4a4111b-cf13-4efe-8a5d-fea9457ac8ad&quot;);&#xD;&#xA;    mapping.addMappedEnd(&quot;ab447316-1252-49bc-a695-f34cb00a3cdc&quot;, [operation.id, callService.id], [serviceOp.id]);&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    serviceOp.getChildren(&quot;Parameter&quot;).filter(x =&gt; x.typeReference.getType().specialization != &quot;DTO&quot;).forEach(param =&gt; {&#xD;&#xA;        const parameter = operation.addChild(&quot;Parameter&quot;, toCamelCase(param.getName()));&#xD;&#xA;        parameter.typeReference.setType(param.typeReference.toModel())&#xD;&#xA;        mapping.addMappedEnd(&quot;ce70308a-e29d-4644-8410-f9e6bbd214fc&quot;, [operation.id, parameter.id], [serviceOp.id, param.id]);&#xD;&#xA;    });&#xD;&#xA;    &#xD;&#xA;    if (serviceOp.getStereotype(&quot;Http Settings&quot;)?.getProperty(&quot;Verb&quot;).getValue() == &quot;GET&quot;) {&#xD;&#xA;        if (serviceOp.typeReference.getType() != null &#xD;&#xA;            &amp;&amp; (serviceOp.typeReference.getType().specialization != &quot;Type-Definition&quot; || (serviceOp.typeReference.getType().specialization == &quot;Type-Definition&quot;) &amp;&amp; serviceOp.typeReference.toModel().genericTypeParameters.length &gt; 0) ) {&#xD;&#xA;            const property = component.addChild(&quot;Property&quot;, &quot;Model&quot;);&#xD;&#xA;            property.typeReference.setType(serviceOp.typeReference.toModel());&#xD;&#xA;            property.typeReference.setIsNullable(true);&#xD;&#xA;            const returnMapping = callService.createAdvancedMapping(operation.id, serviceOp.id, &quot;e60890c6-7ce7-47be-a0da-dff82b8adc02&quot;);&#xD;&#xA;            returnMapping.addMappedEnd(&quot;9cccf6be-31be-4ac0-a026-ed0c4f5578bf&quot;, [operation.id, callService.id, &quot;2f68b1a4-a523-4987-b3da-f35e6e8e146b&quot;], [property.id]);&#xD;&#xA;&#xD;&#xA;        }&#xD;&#xA;    } else {&#xD;&#xA;        const dtoParam = serviceOp.getChild(x =&gt; x.specialization == &quot;Parameter&quot; &amp;&amp; x.typeReference.getType().specialization == &quot;DTO&quot;)&#xD;&#xA;        const dto = dtoParam?.typeReference.getType();&#xD;&#xA;        addViewModel(dto, component, mapping, &quot;DTO&quot;, &quot;Dto&quot;);&#xD;&#xA;        mapping.launchDialog();&#xD;&#xA;    }&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;function addViewModel(contract, component, mapping, ...suffixesToRemove){&#xD;&#xA;&#xD;&#xA;    if (!contract) return;&#xD;&#xA;&#xD;&#xA;    if (!component.getChildren(&quot;Property&quot;).some(x =&gt; x.typeReference.getType().specialization == &quot;Model Definition&quot; &amp;&amp; x.getName() == &quot;Model&quot;)) {&#xD;&#xA;        const newModel = component.addChild(&quot;Model Definition&quot;, removePrefix(removeSuffix(contract.getName(), ...suffixesToRemove)) + &quot;Model&quot;)&#xD;&#xA;        const newProperty = component.addChild(&quot;Property&quot;, &quot;Model&quot;);&#xD;&#xA;        newProperty.typeReference.setType(newModel.id);&#xD;&#xA;        if (contract.getName().startsWith(&quot;Create&quot;)) {&#xD;&#xA;            newProperty.setValue(&quot;new()&quot;);&#xD;&#xA;        } else {&#xD;&#xA;            newProperty.typeReference.setIsNullable(true);&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        addChildElementsRecursivly(newModel, contract, component, mapping,[newProperty.id], [contract.id]);&#xD;&#xA;    }&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;function addChildElementsRecursivly(model, contract, component, mapping, srcPath, dstPath){&#xD;&#xA;    contract.getChildren(&quot;DTO-Field&quot;).forEach(field =&gt; {&#xD;&#xA;&#xD;&#xA;        const modelProperty = model.addChild(&quot;Property&quot;, field.getName());&#xD;&#xA;        const nextSrcPath = srcPath.concat(modelProperty.id);&#xD;&#xA;        const nextDstPath = dstPath.concat(field.id);                &#xD;&#xA;&#xD;&#xA;        if (field.typeReference?.getType()?.specialization == &quot;DTO&quot;){&#xD;&#xA;            const complexChildType = component.addChild(&quot;Model Definition&quot;, removePrefix(removeSuffix(field.typeReference.getType().getName(), &quot;DTO&quot;, &quot;Dto&quot;))  + &quot;Model&quot;)&#xD;&#xA;            modelProperty.typeReference.setType(complexChildType.id);&#xD;&#xA;            modelProperty.typeReference.setIsNullable(field.typeReference.isNullable)&#xD;&#xA;            modelProperty.typeReference.setIsCollection(field.typeReference.isCollection)&#xD;&#xA;            if (field.typeReference.isCollection){&#xD;&#xA;                mapping.addMappedEnd(&quot;ce70308a-e29d-4644-8410-f9e6bbd214fc&quot;, nextSrcPath, nextDstPath);&#xD;&#xA;            }&#xD;&#xA;            addChildElementsRecursivly(complexChildType, field.typeReference.getType(), component, mapping, nextSrcPath, nextDstPath);&#xD;&#xA;        } else {                   &#xD;&#xA;            modelProperty.typeReference.setType(field.typeReference.toModel());&#xD;&#xA;            mapping.addMappedEnd(&quot;ce70308a-e29d-4644-8410-f9e6bbd214fc&quot;, nextSrcPath, nextDstPath);&#xD;&#xA;        }&#xD;&#xA;    })&#xD;&#xA;}" isActive="true" />
            <property name="1d9dd994-46c3-4fdc-a24b-c69f689ca283" display="Dependencies" isActive="true" />
          </properties>
        </stereotype>
      </stereotypes>
      <metadata />
      <childElements />
    </childElement>
  </childElements>
</class>