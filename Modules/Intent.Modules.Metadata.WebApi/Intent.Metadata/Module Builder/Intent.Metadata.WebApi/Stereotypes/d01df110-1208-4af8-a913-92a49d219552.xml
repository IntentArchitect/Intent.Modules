<?xml version="1.0" encoding="utf-8"?>
<stereotypeDefinition id="d01df110-1208-4af8-a913-92a49d219552" version="3.1.0">
  <comment>Configures the source of the parameter for an HTTP request.</comment>
  <name>Parameter Settings</name>
  <targetMode>of-type</targetMode>
  <targetTypes>
    <type id="00208d20-469d-41cb-8501-768fd5eb796b">Parameter</type>
    <type id="7baed1fd-469b-4980-8fd9-4cefb8331eb2">DTO-Field</type>
  </targetTypes>
  <targetReferenceTypes />
  <applyMode>manually</applyMode>
  <icon type="UrlImagePath" source="data:image/png;base64,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" />
  <displayIcon>false</displayIcon>
  <displayIconFunction>return false;</displayIconFunction>
  <displayFunction>if (properties["Source"].value == "Default") {
    let httpSettings = element.getParent().getStereotype("Http Settings");
    if (httpSettings == null) {
        return null;
    }

    let verb = httpSettings.getProperty("Verb").getValue()?.toString()
    let route = httpSettings.getProperty("Route").getValue()?.toString();
    if (route.toLowerCase().indexOf(`{${element.getName().toLowerCase()}}`) !== -1) {
        return "[From Route]";
    }
    if ((verb == "POST" || verb == "PUT") &amp;&amp; 
        element.typeReference.getType().specialization !== "Type-Definition") {
        return "[From Body]";
    }

    if ((verb == "GET" || verb == "DELETE") &amp;&amp;
        element.typeReference.getType().specialization == "Type-Definition") {
        return "[From Query]";
    }
    
    return null;
}

if (properties["Source"].value === "From Header" &amp;&amp; properties["Header Name"].value) {
    return `[From Header(Name = "${properties["Header Name"].value}")]`
}

if (properties["Source"].value === "From Query" &amp;&amp; properties["Query String Name"].value) {
    return `[From Query(Name = "${properties["Query String Name"].value}")]`
}

return `[${properties["Source"].value}]`;
</displayFunction>
  <displayAsAnnotation>true</displayAsAnnotation>
  <displayAsText>false</displayAsText>
  <autoAdd>false</autoAdd>
  <allowMultipleApplies>false</allowMultipleApplies>
  <parentFolderId>0011387a-b122-45d7-9cdb-8e21b315ab9f</parentFolderId>
  <order>0</order>
  <packageId>0011387a-b122-45d7-9cdb-8e21b315ab9f</packageId>
  <packageName>Intent.Metadata.WebApi</packageName>
  <validateFunction>const parameterSettingsStereotypeId = "d01df110-1208-4af8-a913-92a49d219552";
const httpSettings = element.getParent().getStereotype("Http Settings");
const verb = httpSettings?.getProperty("Verb").getValue()?.toString()

function isFromBody(childElement) {
    const parameterSettingsStereotype = childElement.getStereotype(parameterSettingsStereotypeId);
    const source = parameterSettingsStereotype?.getProperty("Source").getValue();

    if (source === "From Body") {
        return true;
    }

    if (source === "Default") {
        return ((verb == "POST" || verb == "PUT") &amp;&amp; childElement.typeReference.getType().specialization !== "Type-Definition");
    }

    return false;
}

if (!isFromBody(element)) {
    return null;
}

const fromBodyParameterCount = element.getParent().getChildren().filter(isFromBody).length;
return fromBodyParameterCount &gt; 1
    ? "More than 1 paramer has its source set to \"From Body\""
    : null;</validateFunction>
  <properties>
    <property id="d2630e0f-f930-404f-b453-1e8052a712f5">
      <comment>Configures how a parameter is supplied in an HTTP request.</comment>
      <name>Source</name>
      <type>string</type>
      <controlType>select</controlType>
      <optionsSource>options</optionsSource>
      <placeholder>(required)</placeholder>
      <defaultValue>Default</defaultValue>
      <valueOptions>
        <option>Default</option>
        <option>From Body</option>
        <option>From Form</option>
        <option>From Header</option>
        <option>From Query</option>
        <option>From Route</option>
      </valueOptions>
      <isRequiredFunction>return true;</isRequiredFunction>
    </property>
    <property id="7a331e9b-f13c-4b33-9013-bd59b4a4999c">
      <name>Header Name</name>
      <type>string</type>
      <controlType>text</controlType>
      <optionsSource>n/a</optionsSource>
      <placeholder>(required)</placeholder>
      <isActiveFunction>return properties["Source"].value === "From Header";</isActiveFunction>
      <isRequiredFunction>return true;</isRequiredFunction>
    </property>
    <property id="c8caa58e-972a-42f2-983e-652ceee762b2">
      <name>Query String Name</name>
      <type>string</type>
      <controlType>text</controlType>
      <optionsSource>n/a</optionsSource>
      <isActiveFunction>return properties["Source"].value === "From Query";</isActiveFunction>
    </property>
  </properties>
</stereotypeDefinition>