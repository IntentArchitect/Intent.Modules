<?xml version="1.0" encoding="utf-8"?>
<settings version="3.1.1">
  <id>f997dbf2-68b1-426f-9721-5c914a54fd34</id>
  <name>AWS DynamoDB Extensions</name>
  <designerReferences />
  <packageSettings />
  <packageExtensions>
    <packageExtension type="AWS Package" typeId="a95a0fde-f67b-4e4a-b9a8-745021efbdb6">
      <requiredPackages />
      <creationOptions>
        <option type="element">
          <specializationType>DynamoDB Table</specializationType>
          <specializationTypeId>b45fcd71-d5a3-48c7-9dd5-e6a138080bcf</specializationTypeId>
          <text>New DynamoDB Table</text>
          <shortcut>ctrl + shift + t</shortcut>
          <defaultName>NewTable</defaultName>
          <icon type="UrlImagePath" source="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAnRJREFUaEPtmjFoFEEUhr83d4oQFRODjSCEpE8RQbARxMrCInshoGJpwMJCK5vL5CzsUliIWooR5HJbWFiJYCMIUUifUxAsBGNECYi52yd7SPT2FufudIi37rTz9s2+f97MfDtvhQFvMuDvz3YA0/OqzmCEemhlIrC6pMpZp70nAxE+1qwcjN1nL4BwQTrSava6jm81WCMxA8ZwfnleljwJ3eF2xupIU1n/7Qz0EgDCudDKgzyALhXIZyC5Bv7JFNpVZCI5o1sRR4h4mgxADFeKhkddZsAfm0XKgWaTlYxuo1bXXBKJ8ra2ICcDq4sKZ1z2Hvs/hVaOth1kHgfz6vrnSWz1vmskgfc1K1dLVi9FcNxl76tfYLNmZS6bKBHjQVI5hUMasZiyjd4ywnNfSqf43RtF3M5RYhuncxbqLflyFhoIFhLhRcoutAdlMiWAusCH3hKhf2uFIspUNlkoqOgxlzZF+PqwLKvxJ2ZDGXXZ++o30KiW5WXbSRxYPe0a0Bg2q2V5NlvRyUbEYZe9r36Fb6GVJ9lECREepyziIZQTKYt4VeCdL6VT/O5W5VSOEjlK9JlzOUoMBEoYw+WOXUgZVaWcEsA9I6z0mRE9P6YRQwo3sokS01ZvuiSJwa1mpVKyeiGC1rXGTrQfH/XX2k7inXiRvzHmr9cqG104fB1amQqs3lWY6cLei4nQqtCMZ5OF9gvDSdm+GMa0yauUy92L+5SqF5lTnH6GEZR6zkI5C/WZc/8HCxWEVgG5rRnG4spICkrMFWC5T0F7fswUGI7LvdlEicDquksShTdxZSSwegcouex99StsxL88ZAslfKnl2+93V3snXmYtMp4AAAAASUVORK5CYII=" />
          <allowMultiple>true</allowMultiple>
        </option>
      </creationOptions>
      <scriptOptions>
        <option>
          <text>Create CRUD Operations</text>
          <shortcut>ctrl + shift + c</shortcut>
          <icon type="FontAwesome" source="code" />
          <script>async function dump(item) {
    await dialogService.info(JSON.stringify(item, null, "  "));
}

const types = {
    endpoint: "API Gateway Endpoint",
    endpointTargetAssociation: "API Endpoint Integration",
    lambda: "Lambda Function",
    dto: "DTO",
    dtoField: "DTO-Field",
    scalarAttribute: "Scalar Attribute",
    dynamoDbItem: "DynamoDB Item",
    parameter: "Parameter",
    guid: "6b649125-18ea-48fd-a6ba-0bfff0d8f488",
    requestBody: "Request Body",
    usesTable: "Uses Table",
    outgoingMappingSettingId: "55ed7b49-b077-405f-a8e2-9ad79953d35e",
    incomingMappingSettingId: "5735dc81-3381-4fc2-b80d-fbe6c449ee2a",
};

let defaultName = null;
if (element?.id == null) {
    // For testing right-clicking on a package, substitute with package id:
    element = { id: "6a652fa0-bd9c-4393-a5a7-162931a47696" };
    defaultName = "Invoice";
}

let tableItem = await getTableItem(defaultName);
if (tableItem == null) {
    return;
}

const name = toPascalCase(singularize(tableItem.getName()));
const pluralName = pluralize(name);
const nameCamelCased = toCamelCase(name);
const pluralNameCamelCased = pluralize(nameCamelCased);

const metadata = {
    key: "CRUD Operation Type",
    findById: `${tableItem.id}-findById`,
    findAll: `${tableItem.id}-findAll`,
    result: `${tableItem.id}-result`,
    create: `${tableItem.id}-create`,
    update: `${tableItem.id}-update`,
    remove: `${tableItem.id}-remove`
};

const folder = getFolder(pluralName, element.id);

const tableItemFields = tableItem.getChildren(types.scalarAttribute);

let resultDto = lookupTypesOf(types.dto).filter(x =&gt; hasCrudOperationType(x, metadata.result))[0];
if (resultDto == null) {
    resultDto = createElement(types.dto, `${name}`, folder.id);
    resultDto.setMetadata(metadata.key, metadata.result);
    resultDto.setMapping(tableItem.id, types.outgoingMappingSettingId);

    for (var i = 0; i &lt; tableItemFields.length; i++) {
        const field = tableItemFields[i];
        const dtoField = createElement(types.dtoField, field.getName(), resultDto.id);
        dtoField.typeReference.setType(field.typeReference.typeId);
        dtoField.typeReference.setIsNullable(field.typeReference.isNullable);
        dtoField.typeReference.setIsCollection(field.typeReference.isCollection);
        dtoField.setMapping(field.id);
    }

    resultDto.collapse();
}

let createDto = lookupTypesOf(types.dto).filter(x =&gt; hasCrudOperationType(x, metadata.create))[0];
if (createDto == null) {
    createDto = createElement(types.dto, `${name}Create`, folder.id);
    createDto.setMetadata(metadata.key, metadata.create);
    createDto.setMapping(tableItem.id, types.incomingMappingSettingId);

    for (var i = 0; i &lt; tableItemFields.length; i++) {
        const field = tableItemFields[i];
        if (field.getName() == "id") {
            continue;
        }

        const dtoField = createElement(types.dtoField, field.getName(), createDto.id);
        dtoField.typeReference.setType(field.typeReference.typeId);
        dtoField.typeReference.setIsNullable(field.typeReference.isNullable);
        dtoField.typeReference.setIsCollection(field.typeReference.isCollection);
        dtoField.setMapping(field.id);
    }

    createDto.collapse();
}

let updateDto = lookupTypesOf(types.dto).filter(x =&gt; hasCrudOperationType(x, metadata.update))[0];
if (updateDto == null) {
    updateDto = createElement(types.dto, `${name}Update`, folder.id);
    updateDto.setMetadata(metadata.key, metadata.update);
    updateDto.setMapping(tableItem.id, types.incomingMappingSettingId);

    for (var i = 0; i &lt; tableItemFields.length; i++) {
        const field = tableItemFields[i];
        const dtoField = createElement(types.dtoField, field.getName(), updateDto.id);
        dtoField.typeReference.setType(field.typeReference.typeId);
        dtoField.typeReference.setIsNullable(field.typeReference.isNullable);
        dtoField.typeReference.setIsCollection(field.typeReference.isCollection);
        dtoField.setMapping(field.id);
    }

    updateDto.collapse();
}

// FindAll
{
    const metadataValue = metadata.findAll;
    let endpoint = lookupTypesOf(types.endpoint).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (endpoint == null) {
        endpoint = createElement(types.endpoint, `GET /${pluralNameCamelCased}`, folder.id);
        endpoint.setMetadata(metadata.key, metadataValue);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Path").setValue(`/${pluralNameCamelCased}`);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Method").setValue("GET");
    }

    let lambda = lookupTypesOf(types.lambda).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (lambda == null) {
        lambda = createElement(types.lambda, `Get${pluralName}`, folder.id);
        lambda.setMetadata(metadata.key, metadataValue);
        lambda.typeReference.setType(resultDto.id);
        lambda.typeReference.setIsCollection(true);
    }

    let association = endpoint.getAssociations(types.endpointTargetAssociation)[0];
    if (association == null) {
        createAssociation(types.endpointTargetAssociation, endpoint.id, lambda.id);
    }

    let usesTable = endpoint.getAssociations(types.usesTable)[0];
    if (usesTable == null) {
        createAssociation(types.usesTable, lambda.id, tableItem.getParent().id);
    }

    lambda.collapse();
}

// FindById
{
    const metadataValue = metadata.findById;
    let endpoint = lookupTypesOf(types.endpoint).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (endpoint == null) {
        endpoint = createElement(types.endpoint, `GET /${pluralNameCamelCased}/{id}`, folder.id);
        endpoint.setMetadata(metadata.key, metadataValue);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Path").setValue(`/${pluralNameCamelCased}/{id}`);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Method").setValue("GET");
    }

    let lambda = lookupTypesOf(types.lambda).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (lambda == null) {
        lambda = createElement(types.lambda, `Get${name}`, folder.id);
        lambda.setMetadata(metadata.key, metadataValue);
        lambda.typeReference.setType(resultDto.id);
        
        const parameter = createElement(types.parameter, "id", lambda.id);
        parameter.typeReference.setType(types.guid);
    }

    let association = endpoint.getAssociations()[0];
    if (association == null) {
        createAssociation(types.endpointTargetAssociation, endpoint.id, lambda.id);
    }

    let usesTable = endpoint.getAssociations(types.usesTable)[0];
    if (usesTable == null) {
        createAssociation(types.usesTable, lambda.id, tableItem.getParent().id);
    }

    lambda.collapse();
}

// Create
{
    const metadataValue = metadata.create;
    let endpoint = lookupTypesOf(types.endpoint).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (endpoint == null) {
        endpoint = createElement(types.endpoint, `POST /${pluralNameCamelCased}`, folder.id);
        endpoint.setMetadata(metadata.key, metadataValue);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Path").setValue(`/${pluralNameCamelCased}`);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Method").setValue("POST");
    }

    let lambda = lookupTypesOf(types.lambda).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (lambda == null) {
        lambda = createElement(types.lambda, `Create${name}`, folder.id);
        lambda.setMetadata(metadata.key, metadataValue);
        lambda.typeReference.setType(types.guid);

        const requestBody = createElement(types.requestBody, types.requestBody, lambda.id);
        requestBody.typeReference.setType(createDto.id);
    }

    let association = endpoint.getAssociations()[0];
    if (association == null) {
        createAssociation(types.endpointTargetAssociation, endpoint.id, lambda.id);
    }

    let usesTable = endpoint.getAssociations(types.usesTable)[0];
    if (usesTable == null) {
        createAssociation(types.usesTable, lambda.id, tableItem.getParent().id);
    }

    lambda.collapse();
}

// Update
{
    const metadataValue = metadata.update;
    let endpoint = lookupTypesOf(types.endpoint).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (endpoint == null) {
        endpoint = createElement(types.endpoint, `PUT /${pluralNameCamelCased}/{id}`, folder.id);
        endpoint.setMetadata(metadata.key, metadataValue);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Path").setValue(`/${pluralNameCamelCased}/{id}`);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Method").setValue("PUT");
    }

    let lambda = lookupTypesOf(types.lambda).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (lambda == null) {
        lambda = createElement(types.lambda, `Update${name}`, folder.id);
        lambda.setMetadata(metadata.key, metadataValue);
        
        const parameter = createElement(types.parameter, "id", lambda.id);
        parameter.typeReference.setType(types.guid);

        const requestBody = createElement(types.requestBody, types.requestBody, lambda.id);
        requestBody.typeReference.setType(updateDto.id);
    }

    let association = endpoint.getAssociations()[0];
    if (association == null) {
        createAssociation(types.endpointTargetAssociation, endpoint.id, lambda.id);
    }

    let usesTable = endpoint.getAssociations(types.usesTable)[0];
    if (usesTable == null) {
        createAssociation(types.usesTable, lambda.id, tableItem.getParent().id);
    }

    lambda.collapse();
}

// Delete
{
    const metadataValue = metadata.remove;
    let endpoint = lookupTypesOf(types.endpoint).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (endpoint == null) {
        endpoint = createElement(types.endpoint, `DELETE /${pluralNameCamelCased}/{id}`, folder.id);
        endpoint.setMetadata(metadata.key, metadataValue);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Path").setValue(`/${pluralNameCamelCased}/{id}`);
        endpoint.getStereotype("API Gateway Endpoint Settings").getProperty("Method").setValue("DELETE");
    }

    let lambda = lookupTypesOf(types.lambda).filter(x =&gt; hasCrudOperationType(x, metadataValue))[0];
    if (lambda == null) {
        lambda = createElement(types.lambda, `Delete${name}`, folder.id);
        lambda.setMetadata(metadata.key, metadataValue);
        
        const parameter = createElement(types.parameter, "id", lambda.id);
        parameter.typeReference.setType(types.guid);
    }

    let association = endpoint.getAssociations()[0];
    if (association == null) {
        createAssociation(types.endpointTargetAssociation, endpoint.id, lambda.id);
    }

    let usesTable = endpoint.getAssociations(types.usesTable)[0];
    if (usesTable == null) {
        createAssociation(types.usesTable, lambda.id, tableItem.getParent().id);
    }

    lambda.collapse();
}

function hasCrudOperationType(element, type) {
    return element.getMetadata("CRUD Operation Type") === type;
}

function getFolder(name, parentId) {
    // Get or create folder in which to place everything:
    let folder = lookupTypesOf("Folder").filter(x =&gt; x.name == name &amp;&amp; x.getParent().id === parentId)[0];
    if (folder == null) {
        folder = createElement("Folder", name, parentId);
    }

    return folder;
}

async function getTableItem(defaultName) {
    const items = lookupTypesOf(types.dynamoDbItem);
    if (items.length === 0) {
        await dialogService.info(`No ${typeName} elements available, create at least one and try again.`)
        return null;
    }

    let itemId = items.filter(x =&gt; defaultName != null &amp;&amp; defaultName == x.getName())[0]?.id;
    if (itemId == null) {
        itemId = await dialogService.lookupFromOptions(items);
    }

    if (itemId == null) {
        // Cancelled the dialogue?
        return null;
    }

    return lookup(itemId);
}</script>
        </option>
      </scriptOptions>
      <typeOrder>
        <type>DynamoDB Table</type>
      </typeOrder>
    </packageExtension>
  </packageExtensions>
  <elementSettings>
    <elementSetting type="DynamoDB Table" typeId="b45fcd71-d5a3-48c7-9dd5-e6a138080bcf">
      <icon type="UrlImagePath" source="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAnRJREFUaEPtmjFoFEEUhr83d4oQFRODjSCEpE8RQbARxMrCInshoGJpwMJCK5vL5CzsUliIWooR5HJbWFiJYCMIUUifUxAsBGNECYi52yd7SPT2FufudIi37rTz9s2+f97MfDtvhQFvMuDvz3YA0/OqzmCEemhlIrC6pMpZp70nAxE+1qwcjN1nL4BwQTrSava6jm81WCMxA8ZwfnleljwJ3eF2xupIU1n/7Qz0EgDCudDKgzyALhXIZyC5Bv7JFNpVZCI5o1sRR4h4mgxADFeKhkddZsAfm0XKgWaTlYxuo1bXXBKJ8ra2ICcDq4sKZ1z2Hvs/hVaOth1kHgfz6vrnSWz1vmskgfc1K1dLVi9FcNxl76tfYLNmZS6bKBHjQVI5hUMasZiyjd4ywnNfSqf43RtF3M5RYhuncxbqLflyFhoIFhLhRcoutAdlMiWAusCH3hKhf2uFIspUNlkoqOgxlzZF+PqwLKvxJ2ZDGXXZ++o30KiW5WXbSRxYPe0a0Bg2q2V5NlvRyUbEYZe9r36Fb6GVJ9lECREepyziIZQTKYt4VeCdL6VT/O5W5VSOEjlK9JlzOUoMBEoYw+WOXUgZVaWcEsA9I6z0mRE9P6YRQwo3sokS01ZvuiSJwa1mpVKyeiGC1rXGTrQfH/XX2k7inXiRvzHmr9cqG104fB1amQqs3lWY6cLei4nQqtCMZ5OF9gvDSdm+GMa0yauUy92L+5SqF5lTnH6GEZR6zkI5C/WZc/8HCxWEVgG5rRnG4spICkrMFWC5T0F7fswUGI7LvdlEicDquksShTdxZSSwegcouex99StsxL88ZAslfKnl2+93V3snXmYtMp4AAAAASUVORK5CYII=" />
      <saveAsOwnFile>true</saveAsOwnFile>
      <validateFunction>if (getChildren("Partition Key")[0] == null) {
    return "Mandatory 'Partition Key' is missing.";
}

return null;</validateFunction>
      <allowRename>true</allowRename>
      <allowAbstract>false</allowAbstract>
      <allowGenericTypes>false</allowGenericTypes>
      <allowMapping>false</allowMapping>
      <allowSorting>true</allowSorting>
      <sortChildren p4:nil="true" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance" />
      <allowFindInView>true</allowFindInView>
      <allowTypeReference>false</allowTypeReference>
      <allowConvertToType p4:nil="true" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance" />
      <allowSetValue>false</allowSetValue>
      <typeOrder>
        <type order="0">Partition Key</type>
        <type order="1">Sort Key</type>
        <type order="2">Entity</type>
        <type order="3">Comment</type>
        <type order="4">Event Stream</type>
      </typeOrder>
      <creationOptions>
        <option type="element">
          <specializationType>Partition Key</specializationType>
          <specializationTypeId>03fe7ef6-a0a2-4834-bd9b-0500a77c2471</specializationTypeId>
          <text>Add Partition Key</text>
          <defaultName>id</defaultName>
          <icon type="FontAwesome" source="hashtag" />
          <allowMultiple>false</allowMultiple>
        </option>
        <option type="element">
          <specializationType>Sort Key</specializationType>
          <specializationTypeId>c36c6e5a-0945-41a5-a619-59714e4738c5</specializationTypeId>
          <text>Add Sort Key</text>
          <defaultName>id2</defaultName>
          <icon type="FontAwesome" source="sort" />
          <allowMultiple>false</allowMultiple>
        </option>
        <option type="element">
          <specializationType>Entity</specializationType>
          <specializationTypeId>04e12b51-ed12-42a3-9667-a6aa81bb6d10</specializationTypeId>
          <text>New Entity</text>
          <shortcut>ctrl + shift + e</shortcut>
          <defaultName>NewEntity</defaultName>
          <icon type="UrlImagePath" source="./img/icons/uml/Class_256x.png" />
          <allowMultiple>true</allowMultiple>
        </option>
        <option type="element">
          <specializationType>Comment</specializationType>
          <specializationTypeId>c4c0c77f-720b-4e91-9c48-b58d2164d30a</specializationTypeId>
          <text>New Comment</text>
          <shortcut>ctrl + shift + c</shortcut>
          <defaultName>NewComment</defaultName>
          <icon type="UrlImagePath" source="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAMAAADWZboaAAABSlBMVEUAAAD//wD/gAD/mTP/zAD/gCv/qivmsxr/gDPmvxr/gDPnthj/hjHpvBb/iTHtthL/iS7quBX/hyvquhX/gzDrvBTuuRf6iCvquhX6hTDtuxfquBX7hi7quRXruRf8hi7suxf8hC38hC3suxbruhb9hi/9hi3suhX9hS3quxfruRbruhb7hC3quhf7hS/ruhb7hi3ruRXsuhf8hS/ruhb8hS38hC7quRb4lyT8hC7suhb3mCf2mST0nSTquRb8hS76iivruhf9hS7ruhbruxb7hS77hS77hi7ruhb8hS/ruhbusBr8hS78hS7ruhb8hS7ruhbruhbtsxn8hC77hS3ruhb8hS7ruhb8hS7tthjruhfruhb8hS7ruhbruhb8hS7ruhb8hS7ruhb8hS7ruhbwy1Dx0GDx0GHz1nP346L8hS7++/D++/H///+gFZfLAAAAZHRSTlMAAQIFBQYGCgoUFBUVFxocHCQkJSUmLC8wMDg9PT5NTk9PW15nZ3Z3d3uAgYGIiI2Nj5GUl5igoba3uL/AwcbGyczMztjY2dnb297f4eLj4+Tl5+fo6err6+zu9fn7/Pz9/f7+TQPISAAAAAFiS0dEbbsGAK0AAAFSSURBVEjH5ddHU8JQFIbhDxR7771ih4i9i72LvRdQgiXq/9+6IIHkEGbOPeMiM75LJs+Cb5F7A3iiQG9Iow3TBjr8ubJ132C1UUdlza3B7KSC0BmDXYTQCz49IjTJp3FCDYX+GfV3Boes5s2WaUtrj7m0cVNndbhLaeWZzuzuktBJnd0KoTE+PSc0wacJQnWFPEXfP+29qdDvH3tfKjT1YS/l/Zn+bGH3uR3yJc/C7nM76HGehd3ndtAp8X+9rpLSnWZIqKaFugOAZGHr9SlYmFLOwnF3yqkvKaYYdFCF19ozELHTUz49AHyzNjrNp+MAChaytPqGK2PlAFASzZ6OLXs8uV6bfr5sO3umFvWMhdNlHrsyfwiPWqdnsD1zP2twu+RZ8r5J+X5oyoc2COlTF4T0tR9SOgIpnYCUzvmkdLFQeHnXV4ul9/6tUvEnQz283y9zvWoo9YIzZQAAAABJRU5ErkJggg==" />
          <allowMultiple>true</allowMultiple>
        </option>
        <option type="association">
          <specializationType>Event Stream</specializationType>
          <specializationTypeId>055db259-36fc-495f-935c-89c847c34c32</specializationTypeId>
          <text>Add Event Destination</text>
          <shortcut>ctrl + shift + a</shortcut>
          <defaultName>NewEventStream</defaultName>
          <icon type="UrlImagePath" source="data:image/png;base64,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" />
          <allowMultiple>true</allowMultiple>
        </option>
      </creationOptions>
      <scriptOptions />
      <mappingSettings />
      <diagramSettings>
        <addNewElementsTo>Package</addNewElementsTo>
        <creationOptions>
          <option type="element">
            <specializationType>Entity</specializationType>
            <specializationTypeId>04e12b51-ed12-42a3-9667-a6aa81bb6d10</specializationTypeId>
            <text>New Entity</text>
            <shortcut>ctrl + alt + i</shortcut>
            <defaultName>NewItem</defaultName>
            <icon type="UrlImagePath" source="./img/icons/uml/Class_256x.png" />
            <allowMultiple>true</allowMultiple>
          </option>
          <option type="element">
            <specializationType>Comment</specializationType>
            <specializationTypeId>c4c0c77f-720b-4e91-9c48-b58d2164d30a</specializationTypeId>
            <text>New Comment</text>
            <defaultName>NewComment</defaultName>
            <icon type="UrlImagePath" source="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAMAAADWZboaAAABSlBMVEUAAAD//wD/gAD/mTP/zAD/gCv/qivmsxr/gDPmvxr/gDPnthj/hjHpvBb/iTHtthL/iS7quBX/hyvquhX/gzDrvBTuuRf6iCvquhX6hTDtuxfquBX7hi7quRXruRf8hi7suxf8hC38hC3suxbruhb9hi/9hi3suhX9hS3quxfruRbruhb7hC3quhf7hS/ruhb7hi3ruRXsuhf8hS/ruhb8hS38hC7quRb4lyT8hC7suhb3mCf2mST0nSTquRb8hS76iivruhf9hS7ruhbruxb7hS77hS77hi7ruhb8hS/ruhbusBr8hS78hS7ruhb8hS7ruhbruhbtsxn8hC77hS3ruhb8hS7ruhb8hS7tthjruhfruhb8hS7ruhbruhb8hS7ruhb8hS7ruhb8hS7ruhbwy1Dx0GDx0GHz1nP346L8hS7++/D++/H///+gFZfLAAAAZHRSTlMAAQIFBQYGCgoUFBUVFxocHCQkJSUmLC8wMDg9PT5NTk9PW15nZ3Z3d3uAgYGIiI2Nj5GUl5igoba3uL/AwcbGyczMztjY2dnb297f4eLj4+Tl5+fo6err6+zu9fn7/Pz9/f7+TQPISAAAAAFiS0dEbbsGAK0AAAFSSURBVEjH5ddHU8JQFIbhDxR7771ih4i9i72LvRdQgiXq/9+6IIHkEGbOPeMiM75LJs+Cb5F7A3iiQG9Iow3TBjr8ubJ132C1UUdlza3B7KSC0BmDXYTQCz49IjTJp3FCDYX+GfV3Boes5s2WaUtrj7m0cVNndbhLaeWZzuzuktBJnd0KoTE+PSc0wacJQnWFPEXfP+29qdDvH3tfKjT1YS/l/Zn+bGH3uR3yJc/C7nM76HGehd3ndtAp8X+9rpLSnWZIqKaFugOAZGHr9SlYmFLOwnF3yqkvKaYYdFCF19ozELHTUz49AHyzNjrNp+MAChaytPqGK2PlAFASzZ6OLXs8uV6bfr5sO3umFvWMhdNlHrsyfwiPWqdnsD1zP2twu+RZ8r5J+X5oyoc2COlTF4T0tR9SOgIpnYCUzvmkdLFQeHnXV4ul9/6tUvEnQz283y9zvWoo9YIzZQAAAABJRU5ErkJggg==" />
            <allowMultiple>true</allowMultiple>
          </option>
        </creationOptions>
        <scriptOptions />
        <elementVisualSettings />
        <associationVisualSettings />
      </diagramSettings>
      <visualSettings type="DynamoDB Table" typeId="b45fcd71-d5a3-48c7-9dd5-e6a138080bcf">
        <size width="100" height="80" />
        <position x="${x}" y="${y}" />
        <display>
          <drawText>
            <text>return getName();</text>
            <style>`font-size: 12px; 
font-family: Helvetica; 
font-weight: bold; 
text-align: center; 
white-space: inherit;
vertical-align: center`</style>
            <size width="${w}" height="18" />
            <position x="${x}" y="${y + h - 36}" />
          </drawText>
          <drawText>
            <text>return 'table';</text>
            <style>`font-size: 12px; 
font-family: Helvetica; 
font-weight: normal; 
text-align: center; 
white-space: inherit;
vertical-align: center`</style>
            <size width="${w}" height="18" />
            <position x="${x}" y="${y + h - 18}" />
          </drawText>
          <drawSvgResource>
            <path>dynamodb-table.svg</path>
            <size width="${w}" height="${h-44}" />
            <position x="${x}" y="${y + 6}" />
          </drawSvgResource>
        </display>
        <stereotypesVisualSettings>
          <size width="${w}" height="18" />
          <position x="${x}" y="${y}" />
        </stereotypesVisualSettings>
        <defaultSize width="100" height="80" />
        <childElementVisualSettings />
      </visualSettings>
      <macros>
        <macro trigger="on-created">
          <script>createElement("Partition Key", "Id", element.id);</script>
        </macro>
        <macro trigger="on-name-changed">
          <script>element.setName(toPascalCase(element.getName()));</script>
        </macro>
      </macros>
      <childElementSettings>
        <childElementSetting type="Partition Key" typeId="03fe7ef6-a0a2-4834-bd9b-0500a77c2471">
          <icon type="FontAwesome" source="hashtag" />
          <saveAsOwnFile>false</saveAsOwnFile>
          <allowRename>true</allowRename>
          <allowAbstract>false</allowAbstract>
          <allowGenericTypes>false</allowGenericTypes>
          <allowMapping>false</allowMapping>
          <allowSorting>true</allowSorting>
          <sortChildren p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />
          <allowFindInView>false</allowFindInView>
          <allowTypeReference>true</allowTypeReference>
          <allowConvertToType p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />
          <allowSetValue>false</allowSetValue>
          <typeReferenceSetting>
            <isRequired>true</isRequired>
            <targetTypes>
              <type>Type-Definition</type>
            </targetTypes>
            <defaultTypeId>d384db9c-a279-45e1-801e-e4e8099625f2</defaultTypeId>
            <allowIsNavigable>true</allowIsNavigable>
            <allowIsNullable>false</allowIsNullable>
            <allowIsCollection>false</allowIsCollection>
            <isNavigableDefault>true</isNavigableDefault>
            <isNullableDefault>false</isNullableDefault>
            <isCollectionDefault>false</isCollectionDefault>
          </typeReferenceSetting>
          <mappingSettings />
          <macros>
            <macro trigger="on-changed">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

element.getParent().getChildren()
    .filter(x =&gt; x.specialization === "Entity")
    .forEach(updateKeys);
</script>
            </macro>
            <macro trigger="on-created">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

element.getParent().getChildren()
    .filter(x =&gt; x.specialization == "Entity")
    .forEach(updateKeys);
</script>
            </macro>
            <macro trigger="on-deleted">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

element.getParent().getChildren()
    .filter(x =&gt; x.specialization === "Entity")
    .forEach(updateKeys);
</script>
            </macro>
            <macro trigger="on-name-changed">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

element.setName(toCamelCase(element.getName()));

element.getParent().getChildren()
    .filter(x =&gt; x.specialization === "Entity")
    .forEach(updateKeys);
</script>
            </macro>
          </macros>
          <childElementSettings />
        </childElementSetting>
        <childElementSetting type="Sort Key" typeId="c36c6e5a-0945-41a5-a619-59714e4738c5">
          <icon type="FontAwesome" source="sort" />
          <saveAsOwnFile>false</saveAsOwnFile>
          <allowRename>true</allowRename>
          <allowAbstract>false</allowAbstract>
          <allowGenericTypes>false</allowGenericTypes>
          <allowMapping>false</allowMapping>
          <allowSorting>true</allowSorting>
          <sortChildren p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />
          <allowFindInView>false</allowFindInView>
          <allowTypeReference>true</allowTypeReference>
          <allowConvertToType p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />
          <allowSetValue>false</allowSetValue>
          <typeReferenceSetting>
            <isRequired>true</isRequired>
            <targetTypes>
              <type>Type-Definition</type>
            </targetTypes>
            <defaultTypeId>d384db9c-a279-45e1-801e-e4e8099625f2</defaultTypeId>
            <allowIsNavigable>true</allowIsNavigable>
            <allowIsNullable>false</allowIsNullable>
            <allowIsCollection>false</allowIsCollection>
            <isNavigableDefault>true</isNavigableDefault>
            <isNullableDefault>false</isNullableDefault>
            <isCollectionDefault>false</isCollectionDefault>
          </typeReferenceSetting>
          <mappingSettings />
          <macros>
            <macro trigger="on-changed">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

element.getParent().getChildren()
    .filter(x =&gt; x.specialization === "Entity")
    .forEach(updateKeys);
</script>
            </macro>
            <macro trigger="on-created">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

element.getParent().getChildren()
    .filter(x =&gt; x.specialization == "Entity")
    .forEach(updateKeys);
</script>
            </macro>
            <macro trigger="on-deleted">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(sortKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

element.getParent().getChildren()
    .filter(x =&gt; x.specialization === "Entity")
    .forEach(updateKeys);
</script>
            </macro>
            <macro trigger="on-name-changed">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

element.setName(toCamelCase(element.getName()));

element.getParent().getChildren()
    .filter(x =&gt; x.specialization === "Entity")
    .forEach(updateKeys);
</script>
            </macro>
          </macros>
          <childElementSettings />
        </childElementSetting>
        <childElementSetting type="Entity" typeId="04e12b51-ed12-42a3-9667-a6aa81bb6d10">
          <icon type="UrlImagePath" source="./img/icons/uml/Class_256x.png" />
          <saveAsOwnFile>true</saveAsOwnFile>
          <displayFunction>const association = getAssociations("Generalization").filter(x =&gt; x.specialization === "Generalization Target End")[0];
const derivedFrom = association != null
    ? ` : ${association.typeReference.display}`
    : "";

return `${name}${genericTypes}${derivedFrom}`;</displayFunction>
          <validateFunction>let otherClasses = getParent().getChildren("Class").filter(x =&gt; x.id != id);
if (otherClasses.some(x =&gt; x.getName() == getName())) {
    return "Please ensure class names are unique in this location."
}</validateFunction>
          <allowRename>true</allowRename>
          <allowAbstract>true</allowAbstract>
          <allowGenericTypes>true</allowGenericTypes>
          <allowMapping>false</allowMapping>
          <allowSorting>true</allowSorting>
          <sortChildren p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />
          <allowFindInView>true</allowFindInView>
          <allowTypeReference>false</allowTypeReference>
          <allowConvertToType p6:nil="true" xmlns:p6="http://www.w3.org/2001/XMLSchema-instance" />
          <allowSetValue>false</allowSetValue>
          <typeOrder>
            <type order="0">Attribute</type>
            <type order="1">Association</type>
            <type order="2">Generalization</type>
          </typeOrder>
          <creationOptions>
            <option type="element">
              <specializationType>Attribute</specializationType>
              <specializationTypeId>0090fb93-483e-41af-a11d-5ad2dc796adf</specializationTypeId>
              <text>Add Attribute</text>
              <shortcut>ctrl + shift + a</shortcut>
              <defaultName>attribute</defaultName>
              <icon type="UrlImagePath" source="./img/icons/uml/Attribute_256x.png" />
              <allowMultiple>true</allowMultiple>
            </option>
            <option type="association">
              <specializationType>Association</specializationType>
              <specializationTypeId>eaf9ed4e-0b61-4ac1-ba88-09f912c12087</specializationTypeId>
              <text>New Association</text>
              <shortcut>ctrl + shift + c</shortcut>
              <defaultName>NewAssociation</defaultName>
              <icon type="UrlImagePath" source="./img/icons/uml/Association_256x.png" />
              <allowMultiple>true</allowMultiple>
            </option>
            <option type="association">
              <specializationType>Generalization</specializationType>
              <specializationTypeId>5de35973-3ac7-4e65-b48c-385605aec561</specializationTypeId>
              <text>New Inheritance</text>
              <shortcut>ctrl + shift + i</shortcut>
              <defaultName>NewGeneralization</defaultName>
              <icon type="UrlImagePath" source="./img/icons/uml/Association_256x.png" />
              <allowMultiple>true</allowMultiple>
            </option>
          </creationOptions>
          <scriptOptions />
          <mappingSettings />
          <visualSettings type="Entity" typeId="04e12b51-ed12-42a3-9667-a6aa81bb6d10">
            <size width="${w}" height="${h}" />
            <position x="${x}" y="${y}" />
            <display>
              <drawPath>
                <path>`M${x + 5},${y} h${w - 10} a5,5 0 0 1 5,5 v${h - 10} a5,5 0 0 1 -5,5 h-${w - 10} a5,5 0 0 1 -5,-5 v-${h - 10} a5,5 0 0 1 5,-5 z`</path>
              </drawPath>
              <drawText>
                <style>`font-size: 12px; 
font-family: Helvetica; 
font-weight: bold; 
text-align: center; 
white-space: inherit;`</style>
                <size width="${w}" height="18" />
                <position x="${x}" y="${y + 8}" />
              </drawText>
            </display>
            <stereotypesVisualSettings>
              <size width="${w}" height="18" />
              <position x="${x}" y="${y}" />
            </stereotypesVisualSettings>
            <defaultSize width="${x}" height="${y}" />
            <childElementVisualSettings>
              <childElementVisualSetting type="Attribute" typeId="0090fb93-483e-41af-a11d-5ad2dc796adf">
                <size width="`${parent.w}`" height="18" />
                <position x="`${parent.x}`" y="`${parent.y + ($index * 18) + 36}`" />
                <display>
                  <drawPath>
                    <condition>return $firstOfType;</condition>
                    <path>`M${x},${y - 6} h${w}`</path>
                  </drawPath>
                  <drawText>
                    <style>`font-size: 12px; font-family: Helvetica; text-align: left; white-space: inherit; padding: 2px 8px;`</style>
                    <size width="${w}" height="${h}" />
                    <position x="${x}" y="${y}" />
                  </drawText>
                </display>
                <stereotypesVisualSettings>
                  <size width="${w}" height="18" />
                  <position x="${x}" y="${y}" />
                </stereotypesVisualSettings>
                <defaultSize width="`${parent.w}`" height="18" />
                <childElementVisualSettings />
              </childElementVisualSetting>
            </childElementVisualSettings>
          </visualSettings>
          <macros>
            <macro trigger="on-created">
              <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

updateKeys(element);
</script>
            </macro>
            <macro trigger="on-name-changed">
              <script>element.setName(toPascalCase(element.getName()));</script>
            </macro>
          </macros>
          <childElementSettings>
            <childElementSetting type="Attribute" typeId="0090fb93-483e-41af-a11d-5ad2dc796adf">
              <icon type="UrlImagePath" source="./img/icons/uml/Attribute_256x.png" />
              <saveAsOwnFile>false</saveAsOwnFile>
              <validateFunction>let otherAttributes = getParent().getChildren("Attribute").filter(x =&gt; x.id != id);
if (otherAttributes.some(x =&gt; x.getName() == getName())) {
    return "Please ensure all attribute names are unique."
}</validateFunction>
              <allowRename>true</allowRename>
              <allowAbstract>false</allowAbstract>
              <allowGenericTypes>false</allowGenericTypes>
              <allowMapping>false</allowMapping>
              <allowSorting>false</allowSorting>
              <sortChildren p8:nil="true" xmlns:p8="http://www.w3.org/2001/XMLSchema-instance" />
              <allowFindInView>true</allowFindInView>
              <allowTypeReference>true</allowTypeReference>
              <allowConvertToType p8:nil="true" xmlns:p8="http://www.w3.org/2001/XMLSchema-instance" />
              <allowSetValue>true</allowSetValue>
              <typeReferenceSetting>
                <isRequired>true</isRequired>
                <targetTypes>
                  <type>Enum</type>
                  <type>Type-Definition</type>
                </targetTypes>
                <defaultTypeId>d384db9c-a279-45e1-801e-e4e8099625f2</defaultTypeId>
                <allowIsNavigable>true</allowIsNavigable>
                <allowIsNullable>true</allowIsNullable>
                <allowIsCollection>true</allowIsCollection>
                <isNavigableDefault>true</isNavigableDefault>
                <isNullableDefault>false</isNullableDefault>
                <isCollectionDefault>false</isCollectionDefault>
              </typeReferenceSetting>
              <mappingSettings />
              <macros>
                <macro trigger="on-name-changed">
                  <script>element.setName(toPascalCase(element.getName()));</script>
                </macro>
              </macros>
              <childElementSettings />
            </childElementSetting>
          </childElementSettings>
        </childElementSetting>
      </childElementSettings>
    </elementSetting>
  </elementSettings>
  <elementExtensions>
    <elementExtension type="Folder" typeId="4d95d53a-8855-4f35-aa82-e312643f5c5f">
      <creationOptions>
        <option type="element">
          <specializationType>DynamoDB Table</specializationType>
          <specializationTypeId>b45fcd71-d5a3-48c7-9dd5-e6a138080bcf</specializationTypeId>
          <text>New DynamoDB Table</text>
          <shortcut>ctrl + alt + t</shortcut>
          <defaultName>NewTable</defaultName>
          <icon type="UrlImagePath" source="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAnRJREFUaEPtmjFoFEEUhr83d4oQFRODjSCEpE8RQbARxMrCInshoGJpwMJCK5vL5CzsUliIWooR5HJbWFiJYCMIUUifUxAsBGNECYi52yd7SPT2FufudIi37rTz9s2+f97MfDtvhQFvMuDvz3YA0/OqzmCEemhlIrC6pMpZp70nAxE+1qwcjN1nL4BwQTrSava6jm81WCMxA8ZwfnleljwJ3eF2xupIU1n/7Qz0EgDCudDKgzyALhXIZyC5Bv7JFNpVZCI5o1sRR4h4mgxADFeKhkddZsAfm0XKgWaTlYxuo1bXXBKJ8ra2ICcDq4sKZ1z2Hvs/hVaOth1kHgfz6vrnSWz1vmskgfc1K1dLVi9FcNxl76tfYLNmZS6bKBHjQVI5hUMasZiyjd4ywnNfSqf43RtF3M5RYhuncxbqLflyFhoIFhLhRcoutAdlMiWAusCH3hKhf2uFIspUNlkoqOgxlzZF+PqwLKvxJ2ZDGXXZ++o30KiW5WXbSRxYPe0a0Bg2q2V5NlvRyUbEYZe9r36Fb6GVJ9lECREepyziIZQTKYt4VeCdL6VT/O5W5VSOEjlK9JlzOUoMBEoYw+WOXUgZVaWcEsA9I6z0mRE9P6YRQwo3sokS01ZvuiSJwa1mpVKyeiGC1rXGTrQfH/XX2k7inXiRvzHmr9cqG104fB1amQqs3lWY6cLei4nQqtCMZ5OF9gvDSdm+GMa0yauUy92L+5SqF5lTnH6GEZR6zkI5C/WZc/8HCxWEVgG5rRnG4spICkrMFWC5T0F7fswUGI7LvdlEicDquksShTdxZSSwegcouex99StsxL88ZAslfKnl2+93V3snXmYtMp4AAAAASUVORK5CYII=" />
          <allowMultiple>true</allowMultiple>
        </option>
      </creationOptions>
      <scriptOptions />
      <typeOrder>
        <type>DynamoDB Table</type>
      </typeOrder>
      <mappingSettings />
    </elementExtension>
    <elementExtension type="Message" typeId="648405f0-9f21-4349-b112-542bf1d5ede4">
      <mappingSettings>
        <mappingSetting id="55ed7b49-b077-405f-a8e2-9ad79953d35e">
          <name>Map from DynamoDB Entity</name>
          <shortcut>ctrl + shift + m</shortcut>
          <defaultModeler>9ed374bb-a19c-46b4-ac58-e8adcbd11063</defaultModeler>
          <optionsSource>elements-of-type</optionsSource>
          <autoSyncTypeReferences>true</autoSyncTypeReferences>
          <symbol>fa-long-arrow-left</symbol>
          <targetTypeOptions>
            <option specializationType="04e12b51-ed12-42a3-9667-a6aa81bb6d10" displayText="Entity" />
          </targetTypeOptions>
          <mapFrom>root</mapFrom>
          <mappings>
            <mapping id="e902cdc0-6203-4356-b30c-bab2d4b6787f">
              <criteria specializationType="Entity">
                <hasTypeReference p9:nil="true" xmlns:p9="http://www.w3.org/2001/XMLSchema-instance" />
                <isCollection p9:nil="true" xmlns:p9="http://www.w3.org/2001/XMLSchema-instance" />
                <hasChildren p9:nil="true" xmlns:p9="http://www.w3.org/2001/XMLSchema-instance" />
              </criteria>
              <mapTo specializationType="Message" childMappingMode="map-to-child" />
              <behaviour autoSelectChildren="true" />
              <childMappings>
                <mapping id="5886703f-8cbf-4e46-ad23-0dfd29228040">
                  <criteria specializationType="Attribute">
                    <hasTypeReference>true</hasTypeReference>
                    <isCollection p11:nil="true" xmlns:p11="http://www.w3.org/2001/XMLSchema-instance" />
                    <hasChildren>false</hasChildren>
                  </criteria>
                  <mapTo specializationType="Message Field" childMappingMode="map-to-child" />
                  <behaviour autoSelectChildren="false" />
                  <childMappings />
                </mapping>
                <mapping id="f86994ec-3a74-43fa-829c-4adc2d79eeed">
                  <criteria specializationType="Association Target End">
                    <hasTypeReference>true</hasTypeReference>
                    <isCollection>true</isCollection>
                    <hasChildren p11:nil="true" xmlns:p11="http://www.w3.org/2001/XMLSchema-instance" />
                  </criteria>
                  <mapTo specializationType="Message Field" childMappingMode="map-to-child" />
                  <behaviour autoSelectChildren="false" />
                  <childMappings />
                </mapping>
                <mapping id="82d658d1-3e5f-4314-a8e6-8bb40ad69f7f">
                  <criteria specializationType="Association Target End">
                    <hasTypeReference>true</hasTypeReference>
                    <isCollection>false</isCollection>
                    <hasChildren p11:nil="true" xmlns:p11="http://www.w3.org/2001/XMLSchema-instance" />
                  </criteria>
                  <mapTo specializationType="Message Field" childMappingMode="traverse" useMappingSettings="e902cdc0-6203-4356-b30c-bab2d4b6787f" />
                  <behaviour autoSelectChildren="false" />
                  <childMappings />
                </mapping>
                <mapping id="d13589a0-7c94-46b9-a31b-57aca4c92eb0">
                  <criteria specializationType="Association Source End">
                    <hasTypeReference>true</hasTypeReference>
                    <isCollection>true</isCollection>
                    <hasChildren p11:nil="true" xmlns:p11="http://www.w3.org/2001/XMLSchema-instance" />
                  </criteria>
                  <mapTo specializationType="Message Field" childMappingMode="map-to-child" />
                  <behaviour autoSelectChildren="false" />
                  <childMappings />
                </mapping>
                <mapping id="9be92ed3-80b8-40fd-9246-2053aca39f22">
                  <criteria specializationType="Association Source End">
                    <hasTypeReference>true</hasTypeReference>
                    <isCollection>false</isCollection>
                    <hasChildren p11:nil="true" xmlns:p11="http://www.w3.org/2001/XMLSchema-instance" />
                  </criteria>
                  <mapTo specializationType="Message Field" childMappingMode="traverse" useMappingSettings="e902cdc0-6203-4356-b30c-bab2d4b6787f" />
                  <behaviour autoSelectChildren="false" />
                  <childMappings />
                </mapping>
                <mapping id="6c6c7a58-a112-4eda-bf17-ad09b42de7c7">
                  <criteria specializationType="Generalization Target End">
                    <hasTypeReference>true</hasTypeReference>
                    <isCollection>false</isCollection>
                    <hasChildren p11:nil="true" xmlns:p11="http://www.w3.org/2001/XMLSchema-instance" />
                  </criteria>
                  <mapTo childMappingMode="traverse" useMappingSettings="e902cdc0-6203-4356-b30c-bab2d4b6787f" />
                  <behaviour autoSelectChildren="true" />
                  <childMappings />
                </mapping>
              </childMappings>
            </mapping>
          </mappings>
        </mappingSetting>
      </mappingSettings>
    </elementExtension>
    <elementExtension type="Diagram" typeId="de1b0aac-1dcf-41e4-9d11-4bbf9a8cacc5">
      <mappingSettings />
      <diagramSettings>
        <addNewElementsTo>Package</addNewElementsTo>
        <creationOptions>
          <option type="element">
            <specializationType>DynamoDB Table</specializationType>
            <specializationTypeId>b45fcd71-d5a3-48c7-9dd5-e6a138080bcf</specializationTypeId>
            <text>New DynamoDB Table</text>
            <shortcut>ctrl + alt + t</shortcut>
            <defaultName>NewTable</defaultName>
            <icon type="UrlImagePath" source="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAnRJREFUaEPtmjFoFEEUhr83d4oQFRODjSCEpE8RQbARxMrCInshoGJpwMJCK5vL5CzsUliIWooR5HJbWFiJYCMIUUifUxAsBGNECYi52yd7SPT2FufudIi37rTz9s2+f97MfDtvhQFvMuDvz3YA0/OqzmCEemhlIrC6pMpZp70nAxE+1qwcjN1nL4BwQTrSava6jm81WCMxA8ZwfnleljwJ3eF2xupIU1n/7Qz0EgDCudDKgzyALhXIZyC5Bv7JFNpVZCI5o1sRR4h4mgxADFeKhkddZsAfm0XKgWaTlYxuo1bXXBKJ8ra2ICcDq4sKZ1z2Hvs/hVaOth1kHgfz6vrnSWz1vmskgfc1K1dLVi9FcNxl76tfYLNmZS6bKBHjQVI5hUMasZiyjd4ywnNfSqf43RtF3M5RYhuncxbqLflyFhoIFhLhRcoutAdlMiWAusCH3hKhf2uFIspUNlkoqOgxlzZF+PqwLKvxJ2ZDGXXZ++o30KiW5WXbSRxYPe0a0Bg2q2V5NlvRyUbEYZe9r36Fb6GVJ9lECREepyziIZQTKYt4VeCdL6VT/O5W5VSOEjlK9JlzOUoMBEoYw+WOXUgZVaWcEsA9I6z0mRE9P6YRQwo3sokS01ZvuiSJwa1mpVKyeiGC1rXGTrQfH/XX2k7inXiRvzHmr9cqG104fB1amQqs3lWY6cLei4nQqtCMZ5OF9gvDSdm+GMa0yauUy92L+5SqF5lTnH6GEZR6zkI5C/WZc/8HCxWEVgG5rRnG4spICkrMFWC5T0F7fswUGI7LvdlEicDquksShTdxZSSwegcouex99StsxL88ZAslfKnl2+93V3snXmYtMp4AAAAASUVORK5CYII=" />
            <allowMultiple>true</allowMultiple>
          </option>
        </creationOptions>
        <scriptOptions />
        <elementVisualSettings />
        <associationVisualSettings />
      </diagramSettings>
    </elementExtension>
  </elementExtensions>
  <associationSettings>
    <associationSetting type="Association" typeId="eaf9ed4e-0b61-4ac1-ba88-09f912c12087">
      <sourceEnd type="Association Source End" typeId="8d9d2e5b-bd55-4f36-9ae4-2b9e84fd4e58">
        <allowSorting>true</allowSorting>
        <sortChildren p5:nil="true" xmlns:p5="http://www.w3.org/2001/XMLSchema-instance" />
        <typeReferenceSetting>
          <isRequired>true</isRequired>
          <targetTypes>
            <type>Entity</type>
          </targetTypes>
          <allowIsNavigable>true</allowIsNavigable>
          <allowIsNullable>true</allowIsNullable>
          <allowIsCollection>true</allowIsCollection>
          <isNavigableDefault>false</isNavigableDefault>
          <isNullableDefault>false</isNullableDefault>
          <isCollectionDefault>true</isCollectionDefault>
        </typeReferenceSetting>
      </sourceEnd>
      <targetEnd type="Association Target End" typeId="0a66489f-30aa-417b-a75d-b945863366fd">
        <allowSorting>true</allowSorting>
        <sortChildren p5:nil="true" xmlns:p5="http://www.w3.org/2001/XMLSchema-instance" />
        <typeReferenceSetting>
          <isRequired>true</isRequired>
          <targetTypes>
            <type>Entity</type>
          </targetTypes>
          <allowIsNavigable>false</allowIsNavigable>
          <allowIsNullable>true</allowIsNullable>
          <allowIsCollection>true</allowIsCollection>
          <isNavigableDefault>true</isNavigableDefault>
          <isNullableDefault>false</isNullableDefault>
          <isCollectionDefault>false</isCollectionDefault>
        </typeReferenceSetting>
      </targetEnd>
      <visualSettings>
        <sourceEnd>
          <primaryLabel>`${name &amp;&amp; typeReference.isNavigable ? name : ""}`</primaryLabel>
          <secondaryLabel>${typeReference.isCollection ? "*" : typeReference.isNullable ? "0..1" : "1"}</secondaryLabel>
          <pointIndicator>
            <fillColor>!typeReference.isNullable &amp;&amp; !typeReference.isCollection ? '#000000' : '#ffffff'</fillColor>
            <path>return `l 5.0 7.5 l -5.0 7.5 l -5.0 -7.5 Z`</path>
          </pointIndicator>
          <navigableIndicator>
            <fillColor>return `#000000`</fillColor>
            <path>return `m 0 15 l 5 10 l -5 -2.5 l -5 2.5 Z`</path>
          </navigableIndicator>
        </sourceEnd>
        <targetEnd>
          <primaryLabel>${name &amp;&amp; typeReference.isNavigable ? name : ""}</primaryLabel>
          <secondaryLabel>return `${typeReference.isCollection ? "*" : typeReference.isNullable ? "0..1" : "1"}`</secondaryLabel>
          <navigableIndicator>
            <fillColor>return `#000000`</fillColor>
            <path>return `l 5 10 l -5 -2.5 l -5 2.5 Z`</path>
          </navigableIndicator>
        </targetEnd>
      </visualSettings>
      <macros>
        <macro trigger="on-changed">
          <script>/**
 * This is a common function used across all scripts which update keys, should you make any changes
 * then be sure to update it in all scripts.
 */
function updateKeys(entity) {
    if (entity == null) {
        return;
    }

    const isAggregateRoot = !entity.getAssociations("Association")
        .some(e =&gt; e.isSourceEnd() &amp;&amp; !e.typeReference.getIsCollection() &amp;&amp; !e.typeReference.getIsNullable());
    const partitionKey = entity.getParent().getChildren("Partition Key")[0];
    const sortKey = entity.getParent().getChildren("Sort Key")[0];
    let partitionKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-partition-key"))[0];
    let sortKeyAttribute = entity.getChildren("Attribute").filter(a =&gt; a.hasMetadata("dynamodb-sort-key"))[0];

    if (!isAggregateRoot) {
        partitionKeyAttribute?.delete();
        sortKeyAttribute?.delete();
        return;
    }

    let order = 0;

    if (partitionKey != null) {
        if (partitionKeyAttribute == null) {
            partitionKeyAttribute = createElement("Attribute", partitionKey.getName(), entity.id);
            partitionKeyAttribute.addMetadata("dynamodb-partition-key", null);
        }

        partitionKeyAttribute.setOrder(order++);
        partitionKeyAttribute.setName(partitionKey.getName());
        partitionKeyAttribute.typeReference.setType(partitionKey.typeReference.typeId);
    }

    if (sortKey != null) {
        if (sortKeyAttribute == null) {
            sortKeyAttribute = createElement("Attribute", sortKey.getName(), entity.id);
            sortKeyAttribute.addMetadata("dynamodb-sort-key", null);
        }

        sortKeyAttribute.setOrder(order++);
        sortKeyAttribute.setName(sortKey.getName());
        sortKeyAttribute.typeReference.setType(sortKey.typeReference.typeId);
    }
}

updateKeys(association.typeReference.getType());
updateKeys(association.getOtherEnd().typeReference.getType());
</script>
        </macro>
      </macros>
    </associationSetting>
    <associationSetting type="Generalization" typeId="5de35973-3ac7-4e65-b48c-385605aec561">
      <sourceEnd type="Generalization Source End" typeId="8190bf43-222c-4b53-8a44-14626efe3574">
        <allowSorting>true</allowSorting>
        <sortChildren p5:nil="true" xmlns:p5="http://www.w3.org/2001/XMLSchema-instance" />
        <typeReferenceSetting>
          <isRequired>true</isRequired>
          <targetTypes>
            <type>Entity</type>
          </targetTypes>
          <allowIsNavigable>false</allowIsNavigable>
          <allowIsNullable>true</allowIsNullable>
          <allowIsCollection>true</allowIsCollection>
          <isNavigableDefault>false</isNavigableDefault>
          <isNullableDefault>false</isNullableDefault>
          <isCollectionDefault>false</isCollectionDefault>
        </typeReferenceSetting>
      </sourceEnd>
      <targetEnd type="Generalization Target End" typeId="4686cc1d-b4d8-4b99-b45b-f77bd5496946">
        <allowSorting>true</allowSorting>
        <sortChildren p5:nil="true" xmlns:p5="http://www.w3.org/2001/XMLSchema-instance" />
        <typeReferenceSetting>
          <isRequired>true</isRequired>
          <targetTypes>
            <type>Entity</type>
          </targetTypes>
          <allowIsNavigable>false</allowIsNavigable>
          <allowIsNullable>true</allowIsNullable>
          <allowIsCollection>true</allowIsCollection>
          <isNavigableDefault>true</isNavigableDefault>
          <isNullableDefault>false</isNullableDefault>
          <isCollectionDefault>false</isCollectionDefault>
        </typeReferenceSetting>
      </targetEnd>
      <visualSettings>
        <sourceEnd />
        <targetEnd>
          <pointIndicator>
            <fillColor>return `#ffffff`;</fillColor>
            <path>return `l 7 10 l -14 0 Z`</path>
          </pointIndicator>
        </targetEnd>
      </visualSettings>
    </associationSetting>
  </associationSettings>
  <associationExtensions>
    <associationExtension type="Event Stream" typeId="055db259-36fc-495f-935c-89c847c34c32">
      <sourceEndExtension>
        <typeReferenceExtension>
          <isRequired>true</isRequired>
          <targetTypes>
            <type>DynamoDB Table</type>
          </targetTypes>
          <allowIsNavigable>inherit</allowIsNavigable>
          <allowIsNullable>inherit</allowIsNullable>
          <allowIsCollection>inherit</allowIsCollection>
        </typeReferenceExtension>
      </sourceEndExtension>
      <targetEndExtension>
        <typeReferenceExtension>
          <isRequired>true</isRequired>
          <targetTypes />
          <allowIsNavigable>inherit</allowIsNavigable>
          <allowIsNullable>inherit</allowIsNullable>
          <allowIsCollection>inherit</allowIsCollection>
        </typeReferenceExtension>
      </targetEndExtension>
      <macros />
    </associationExtension>
    <associationExtension type="Resource Access" typeId="d3fe616a-e00b-4553-aaa2-41b626e58faa">
      <sourceEndExtension>
        <typeReferenceExtension>
          <isRequired>true</isRequired>
          <targetTypes />
          <allowIsNavigable>inherit</allowIsNavigable>
          <allowIsNullable>inherit</allowIsNullable>
          <allowIsCollection>inherit</allowIsCollection>
        </typeReferenceExtension>
      </sourceEndExtension>
      <targetEndExtension>
        <typeReferenceExtension>
          <isRequired>true</isRequired>
          <targetTypes>
            <type>DynamoDB Table</type>
          </targetTypes>
          <allowIsNavigable>inherit</allowIsNavigable>
          <allowIsNullable>inherit</allowIsNullable>
          <allowIsCollection>inherit</allowIsCollection>
        </typeReferenceExtension>
      </targetEndExtension>
      <macros />
    </associationExtension>
  </associationExtensions>
</settings>